@{
    Layout = null;
    var empCode = User.FindFirst("EmployeeCode")?.Value ?? "";
    var empName = User.FindFirst("EmployeeName")?.Value ?? User.Identity?.Name ?? "";
    var active = ViewContext?.RouteData?.Values["action"]?.ToString() ?? "";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>@ViewData["Title"] - Psikotes Wisesa</title>
    <base href="@Url.Content("~/")">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .brand-purple{ background-color:#5D4BB3; }
      .navside{ background-color:#1f2937; }
      .navside .group:hover{ background-color:#111827; }
      .navside.closed{ width:0 !important; padding:0 !important; overflow:hidden; pointer-events:none; border:none; }
      .content-wrap{ width:100%; }
      #maincontent{ overflow-x:hidden; }
      .date-formatted{ position:relative; padding-right:2.25rem; }
      .date-formatted::before{ content: attr(data-display); position:absolute; left:.5rem; right:2.25rem; top:50%; transform:translateY(-50%); color:#111827; pointer-events:none; display:block; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
      .date-formatted::-webkit-datetime-edit{ color:transparent; }
      .date-formatted::-webkit-calendar-picker-indicator{ opacity:1; position:absolute; right:.5rem; top:50%; transform:translateY(-50%); margin:0; padding:0; cursor:pointer; }
      details.user-menu-wrap > summary{ list-style:none; }
      details.user-menu-wrap > summary::-webkit-details-marker{ display:none; }
      details.user-menu-wrap .user-menu-panel{ display:none; }
      details.user-menu-wrap[open] .user-menu-panel{ display:block; }
      .dct-overlay input:disabled,
      .dct-overlay select:disabled,
      .dct-overlay textarea:disabled,
      .dct-overlay input[readonly],
      .dct-overlay textarea[readonly]{ background:#D1D5DB !important; color:#6B7280 !important; cursor:not-allowed; }
    </style>
</head>
<body class="min-h-screen">
    <header class="brand-purple relative text-white h-[3.45rem] flex items-center px-0 shadow">
        <div class="w-[20.4rem] px-4 font-semibold text-[1.5rem]">WSS RECRUITMENT</div>
        <div id="header-divider" class="absolute left-[20.4rem] top-0 bottom-0 w-px bg-white/20"></div>
        <button id="nav-toggle" class="ml-4 text-white/90 font-bold">☰</button>
        <div class="flex-1"></div>
        <details class="user-menu-wrap relative pr-[60px]">
            <summary class="text-base font-semibold flex items-center gap-2 select-none cursor-pointer">
                <span>@empName</span>
                <span class="text-white/80">▼</span>
            </summary>
            <div class="user-menu-panel absolute right-0 top-full mt-2 w-[10rem] rounded-md bg-white text-gray-900 shadow-lg">
                <a id="logout-link-top" href="@Url.Action("Logout","Account")" class="block px-4 py-3 hover:bg-gray-100">Log Out</a>
            </div>
        </details>
    </header>
    <div class="flex">
        <aside id="navside" class="navside text-white w-[20.4rem] shrink-0 min-h-[calc(100vh-3rem)] transform transition-transform ease-in-out duration-300 translate-x-0">
            <div class="px-5 py-5 border-b border-gray-700">
                <div class="text-[1.1rem] font-bold">@empCode</div>
                <a id="logout-link" href="@Url.Action("Logout","Account")" title="Logout" class="inline-block mt-2">
                    <img src="@Url.Content("~/DCT3_Standarisasi/assets/icons/shutdown.png")" alt="Logout" class="w-5 h-5" />
                </a>
            </div>
            <div class="bg-[#0f172a] px-5 py-4 border-b border-gray-700">
                <div class="uppercase text-gray-300 tracking-wide text-[1rem]">MAIN NAVIGATION</div>
            </div>
            <nav class="pt-1 text-[1.15rem]">
                <a class="block px-5 py-4 transition-colors duration-200 @(active == "Applicants" ? "bg-[#0c1220] border-l-4 border-[#5D4BB3] text-white" : "text-gray-300 hover:bg-[#111827]")" asp-controller="Dashboard" asp-action="Applicants">Data Pelamar</a>
                <a class="block px-5 py-4 transition-colors duration-200 @(active == "Questions" ? "bg-[#0c1220] border-l-4 border-[#5D4BB3] text-white" : "text-gray-300 hover:bg-[#111827]")" asp-controller="Dashboard" asp-action="Questions">Master Pertanyaan</a>
                <a class="block px-5 py-4 transition-colors duration-200 @(active == "Guides" ? "bg-[#0c1220] border-l-4 border-[#5D4BB3] text-white" : "text-gray-300 hover:bg-[#111827]")" asp-controller="Dashboard" asp-action="Guides">Master Petunjuk</a>
                <a class="block px-5 py-4 transition-colors duration-200 @(active == "Parameters" ? "bg-[#0c1220] border-l-4 border-[#5D4BB3] text-white" : "text-gray-300 hover:bg-[#111827]")" asp-controller="Dashboard" asp-action="Parameters">Master Parameter</a>
                <a class="block px-5 py-4 transition-colors duration-200 @(active == "Scores" ? "bg-[#0c1220] border-l-4 border-[#5D4BB3] text-white" : "text-gray-300 hover:bg-[#111827]")" asp-controller="Dashboard" asp-action="Scores">Master Penilaian</a>
                <a class="block px-5 py-4 transition-colors duration-200 @(active == "Screening" ? "bg-[#0c1220] border-l-4 border-[#5D4BB3] text-white" : "text-gray-300 hover:bg-[#111827]")" asp-controller="Dashboard" asp-action="Screening">View Screening</a>
            </nav>
        </aside>
        <main id="maincontent" class="flex-1 p-6 transition-all content-wrap">
            @RenderBody()
        </main>
    </div>

    <script>
      (function(){
        var open = true;
        var nav = document.getElementById('navside');
        var divider = document.getElementById('header-divider');
        document.getElementById('nav-toggle').addEventListener('click', function(){
          open = !open;
          if(open){
            nav.classList.remove('-translate-x-full');
            nav.classList.remove('closed');
            divider.style.display = 'block';
          } else {
            nav.classList.add('-translate-x-full');
            nav.classList.add('closed');
            divider.style.display = 'none';
          }
        });
        var logout = document.getElementById('logout-link');
        var logoutTop = document.getElementById('logout-link-top');
        var logoutUrl = '@Url.Action("Logout","Account")';
        function doLogout(){
          if(window.DCT3Modals){
            DCT3Modals.open('confirmation', { message: 'Keluar dari sesi?', onYes: function(){ window.location.href = logoutUrl; } });
          } else {
            window.location.href = logoutUrl;
          }
        }
        if(logout){
          logout.addEventListener('click', function(e){
            e.preventDefault();
            doLogout();
          });
        }
        if(logoutTop){
          logoutTop.addEventListener('click', function(e){
            e.preventDefault();
            doLogout();
          });
        }
      })();
    </script>
    @await Html.PartialAsync("_DCT3Notifications")
</body>
</html>
